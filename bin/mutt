#!/bin/bash

case "$(basename $0)" in
    rmutt) export ACCOUNT=redhat;;
    amutt) export ACCOUNT=ttnn TTNN_USER=adhesion;;
    cmutt) export ACCOUNT=ttnn TTNN_USER=common;;
    smutt) export ACCOUNT=ttnn TTNN_USER=system;;
    nmutt) export ACCOUNT=ttnn TTNN_USER=noc;;
    *) [ ! "$ACCOUNT" ] && export ACCOUNT=sileht;;
esac

TITLE=${ACCOUNT}
[ "$TTNN_USER" ] && TITLE="$TITLE/$TTNN_USER"

tmux rename-window -t${TMUX_PANE} "mutt[$TITLE]"

possible_paths="/home/sileht/source/neomutt/neomutt/neomutt /home/sileht/workspace/source/neomutt/neomutt"

for p in $possible_paths; do
    [ -e "$p" ] && exec gdb -ex='set confirm on' -ex "run" -ex "bt" -ex "quit" $p "$@"
done
echo "neomutt binary not found"
exit 1
